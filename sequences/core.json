{
  "name": "core",
  "display_name": "Базовые функции",
  "description": "Базовые функции бота.",
  "version": [1,0,0,0],
  "triggers": [
    {
      "type": "text_exact",
      "params": ["+"],
      "subseq": "upvote_user"
    },
    {
      "type": "text_exact",
      "params": ["бот придержи","бот оставь","бот не удаляй"],
      "subseq": "cancel_kill",
      "target": "reply"
    }
  ],
  "subseqs": {
    "cancel_kill": [
      {
        "action": "keep_msg",
        "params": [""],
        "target": "reply"
      },
      {
        "action": "gosub",
        "params": ["cancel_kill_success"]
      }
    ],
    "cancel_kill_success": [
      {
        "action": "kill_msg",
        "params": [5]
      },
      {
        "action": "emit_text",
        "params": ["cancel_kill_success",15]
      }
    ],
    "cancel_no_target": [
      {
        "action": "kill_msg",
        "params": [5]
      },
      {
        "action": "emit_text",
        "params": ["cancel_kill_no_target",15]
      }

    ],
    "cancel_no_kill": [

    ],
    "upvote_user": [
      {
        "action": "get_uid",
        "params": ["upvoter"]
      },
      {
        "action": "get_uid",
        "params": ["upvotee"],
        "target": "reply"
      },
      {
        "action": "if_eq",
        "params": ["*upvotee",0,"upvote_no_target","upvote_proceed"]
      }
    ],
    "upvote_proceed": [
      {
        "action": "concat",
        "params": ["upvoteduser_","*upvotee","upvoterscore"]
      },
      {
        "action": "concat",
        "params": ["upvotedbyuser_","*upvoter","upvoteescore"]
      },
      {
        "action": "score_up",
        "params": [
          "*upvotee",
          "rep",
          1,
          "upvotee_new_rep"
        ]
      },
      {
        "action": "concat",
        "params": ["\\","*upvotee_new_rep","upvotee_new_rep"]
      },
      {
        "action": "score_up",
        "params": ["*upvotee","*upvoteescore",1,"dev_null"]
      },
      {
        "action": "score_up",
        "params": ["*upvoter","*upvoterscore",1,"dev_null"]
      },
      {
        "action": "score_up",
        "params": ["*upvoter","upvotes_given",1,"dev_null"]
      },
      {
        "action": "get_user",
        "params": ["*upvotee","upvotee_info"]
      },
      {
        "action": "obj_read",
        "params": ["upvotee_info","current_nick","usertag"]
      },
      {
        "action": "emit_text",
        "params": ["upvote_success",15]
      }
    ]
  },
  "stringpools": {
    "upvote_success": [
        " [{usertag}](tg://user?id={upvotee}) получает плюс и теперь имеет {upvotee_new_rep} совершенно бесполезных очков",
        " [{usertag}](tg://user?id={upvotee}) получает плюс и теперь имеет {upvotee_new_rep} совершенно бесполезных очков",
        " [{usertag}](tg://user?id={upvotee}) получает плюс и теперь имеет {upvotee_new_rep} совершенно бесполезных очков",
        " [{usertag}](tg://user?id={upvotee}) получает плюс и теперь имеет {upvotee_new_rep} совершенно бесполезных очков",
        " [{usertag}](tg://user?id={upvotee}) получает плюс и теперь имеет {upvotee_new_rep} совершенно бесполезных очков",
        " [{usertag}](tg://user?id={upvotee}) получает плюс и теперь имеет {upvotee_new_rep} совершенно бесполезных очков",
        " [{usertag}](tg://user?id={upvotee}) получает плюс и теперь имеет {upvotee_new_rep} совершенно бесполезных очков",
        "У [{usertag}](tg://user?id={upvotee}) теперь {upvotee_new_rep} пепяки, и это круто \\(нет\\)",
        "Эй\\, [{usertag}](tg://user?id={upvotee})\\, у тебя уже {upvotee_new_rep} плюсов\\, можешь начинать гордиться",
        "[{usertag}](tg://user?id={upvotee}) получает хуй в ро\\.\\.\\. плюс и теперь имеет {upvotee_new_rep} совершенно бесполезных очков"
    ],
    "cancel_kill_success": [
      "Ок\\!"
    ],
    "cancel_kill_no_target": [
      "Нужно писать это в ответ на сообщение\\, которое боту нужно не удалять\\."
    ]
  }
}
